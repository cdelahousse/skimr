(function(p,j){var g,I,o,F,i,u,h,A,D,n,k=50,z=250,w,v=0,x=null,e=0;function B(){var J=document.createDocumentFragment();I=c();document.getElementsByTagName("head")[0].appendChild(I);w=f();if(!w){alert("Skimr can't work on this page");H();return}p.scroll(0,0);F=q();J.appendChild(F);o=t();i=l();h=G();F.appendChild(i);F.appendChild(h);F.appendChild(o);document.body.appendChild(J);d(F);r(I,function(){g=p.google;g.load("feeds","1",{callback:m,nocss:true})})}function m(K,L){var J;K===3&&(K=j);K||(K=k);L||(L=E);J=new g.feeds.Feed(w);J.setResultFormat(g.feeds.Feed.JSON_FORMAT);J.includeHistoricalEntries();J.setNumEntries(K);J.load(L)}function E(K){var J;if(K.status.code===400){alert("Woops, there is a problem with the feed");H()}y(i);x=K.feed.entries;e=x.length;u=a();F.appendChild(u);m(z,function(){x=this.feed.entries;e=x.length;e>=k&&(D.className="show")})}function C(J){v+=J;D.className=J>=(e-v)?"hide":"show";n.className=v>0?"show":"hide";y(document.getElementById("skimr-table"));u=a(J);F.appendChild(u)}function d(J){J.onclick=function(K){var L;K||(K=p.event);L=K.target||K.src;switch(L.id){case"skimr-exit":H();break;case"skimr-next":C(k);break;case"skimr-prev":C(-k);break}}}function f(){var Q=document.getElementsByTagName("link"),J=p.location,O=false,P=Q.length,N,L;for(var K=0;K<P;K++){N=Q[K];L=N.getAttribute("type");if(L=="application/rss+xml"||L=="application/atom+xml"){O=N.getAttribute("href");if(!O.match(/^http/)){var M=(O.match(/^\//))?"":J.pathname;O=J.protocol+"//"+J.hostname+M+O}break}}return O||s(J)}function s(J){return r(I,function(){g.feeds.lookupFeed(J,function(K){var L=K.url||false;console.log("Google Feed Lookup returned: ",L);return L})})}function c(){var J=document.createElement("script");J.src="https://www.google.com/jsapi";return J}function l(){var J=document.createElement("div");J.id="skimr-loading";(J.innerContent)?J.innerContent="Loading...":J.innerText="Loading...";return J}function q(){var J=document.createElement("div");J.id="skimr";return J}function t(){var K,J;K='html {position: relative;}\nhtml,head,body {width: 100% !important; padding: 0 !important; min-width: 100% !important; margin: 0 !important; max-width: 100% !important; min-height: 100%;}\n#skimr, #skimr * {padding: 0; margin: 0;color:#000; font-weight: normal;border:0; text-transform: none; text-shadow:none; text-align: left;font: normal normal 16px/1.2 Helvetica, Arial, Sans-Serif;}\n#skimr {position:absolute;top:0;left:0;min-height:100%;width:100%; zoom:100%;background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQI12NgYGC4DAAA2ADUwvUnWwAAAABJRU5ErkJggg==) transparent repeat; z-index: 99999999; padding:0 0 30px; }\n#skimr-loading {width: 100%; background-color: #FFF; color: #000;text-align: center;}\n#skimr-dashboard {width: 100%; background-color: #fff; color: #ddd;position: fixed; bottom: 0; left: 0; text-align: center; }\n#skimr a {text-decoration: underline;}#skimr-dashboard a {margin-left: 5px;}#skimr-dashboard .hide {visibility: hidden;}#skimr-table {background-color: #EFEFEF; max-width: 1000px; margin: 0 auto; -webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;margin-top:20px;width:auto;border-collapse: separate;border-spacing: 0;background-image: -webkit-gradient( linear, left 40, left top, color-stop(0.34, rgb(239,239,239)), color-stop(0.77, rgb(221,221,221)), color-stop(0.94, rgb(222,222,222))); background-image: -moz-linear-gradient( center 40, rgb(239,239,239) 34%, rgb(221,221,221) 77%, rgb(222,222,222) 94%);}\n#skimr-table th {font: normal 1.2em/1.8 Corbel, "Lucida Sans Unicode", "Lucida Grade", "Bitstream Vera Sans", "Luxi Serif", Verdana, sans-serif; text-shadow: 2px 2px 3px #aaa;}\n#skimr-table th:first-child {padding: 0 0 0 5px; font-size: 1em;}\n#skimr-table th:last-child { text-align: right;padding-right: 14px}\n#skimr-table a {color: #333; text-decoration:none; display: block; padding-left:6px;}\n#skimr-table a:hover {color: #333;}\n#skimr-table tr:hover td:first-child {border-right: solid 1px #efefef;border-bottom: solid 1px #ccc;}\n#skimr-table tr:hover td {background-color:#CFCFCF;}\n#skimr-table td:first-child {color: #777; font-size: 0.9em;text-align: center; border-right: solid 1px #ccc; border-bottom:solid 1px #efefef;}\n#skimr-table td {line-height: 1.9;}\n#skimr-table td:last-child {padding: 0 7px 0 0; border-bottom: solid 1px #ccc;}\n#skimr-table tr:last-child:hover td {-webkit-border-bottom-left-radius:10px;-moz-border-bottom-left-radius:10px;border-bottom-left-radius:10px;}\n#skimr-table tr:last-child td {padding-bottom: 5px; border-bottom: 0;}\n';J=document.createElement("style");try{J.appendChild(document.createTextNode(K))}catch(L){if(J.styleSheet){J.styleSheet.cssText=K}}return J}function a(L){var P=document.createDocumentFragment(),T=document.createElement("table"),U="",M,O,R,K,Q,J,S;P.appendChild(T);T.id="skimr-table";L||(L=k);O=x;K=((v+L)>e)?e:v+Math.abs(L);for(var N=v;N<K;N++){R=O[N];M=new Date(R.publishedDate);Q=M.getFullYear().toString(10).substring(2);J=(M.getMonth()+1).toString(10);J=J.length==1?"0"+J:J;S=(M.getDate()+1).toString(10);S=S.length==1?"0"+S:S;U+="<tr><td>"+Q+"/"+J+"/"+S+'</td> <td><a href="'+R.link+'"> '+R.title+"</a></td></tr>\n"}T.innerHTML='<tr><th>yy/mm/dd</strong></th><th id="skimr-title">Skimr</th></tr>\n'+U;return P}function G(){var J=document.createDocumentFragment(),K=document.createElement("div");J.appendChild(K);K.id="skimr-dashboard";A=b("Exit","skimr-exit");D=b("Next","skimr-next","hide");n=b("Prev","skimr-prev","hide");K.appendChild(n);K.appendChild(A);K.appendChild(D);return J}function H(){y(F);y(o);y(I);y(p.skimr_script);p.skimr&&(delete p.skimr);p.skimr_script&&(delete p.skimr_script);return true}function y(J){return J&&J.parentNode.removeChild(J)}function b(M,N,L){var J=p.document,K=J.createElement("a");K.href="#";K.appendChild(J.createTextNode(M));N&&(K.id=N);L&&(K.className=L);return K}function r(K,J){if(K.readyState){K.onreadystatechange=function(){if(K.readyState=="loaded"||K.readyState=="complete"){K.onreadystatechange=null;return J()}}}else{I.onload=function(){return J()}}}p.skimr={exitApp:H,init:B,pagination:C,assetReady:r};B()})(window);